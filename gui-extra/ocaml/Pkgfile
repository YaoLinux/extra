makedepends=( tk ncurses binutils gdbm)

description="Objective CAML Compiler"
url="http://caml.inria.fr/"

packager="Yaolinux Team"
maintainer="rems"

name=ocaml
version=4.09.0

unset MAKEFLAGS

source=(http://caml.inria.fr/pub/distrib/$name-${version%.*}/$name-$version.tar.xz)

build() {

    cd $name-$version
    
    ./configure --prefix /usr \
                --mandir /usr/share/man
    
    make --debug=v world.opt

    make PREFIX=$PKG/usr MANDIR=$PKG/usr/share/man install
    
    local f
    for f in $PKG/usr/bin/*.opt; do mv $f ${f%%.opt}; done
}
